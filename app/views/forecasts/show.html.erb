<h1>Weather Forecast</h1>

<%= form_with url: root_path, method: :get, local: true do %>
  <%= label_tag :address, "Enter address:" %>
  <%= text_field_tag :address, @address, size: 50 %>
  <%= submit_tag "Get Forecast" %>
<% end %>

<% if @error %>
  <p style="color: red;"><%= @error %></p>
<% elsif @result %>
  <h2>Weather for <%= @address %> (<%= @result[:zip] %>)</h2>
  <ul>
    <li>Temperature: <%= @result[:weather]['main']['temp'] %>°C</li>
    <li>High: <%= @result[:weather]['main']['temp_max'] %>°C</li>
    <li>Low: <%= @result[:weather]['main']['temp_min'] %>°C</li>
    <li>Description: <%= @result[:weather]['weather'][0]['description'] %></li>
    <li>Humidity: <%= @result[:weather]['main']['humidity'] %>%</li>
    <li>From Cache: <%= @result[:from_cache] ? "Yes" : "No" %></li>
  </ul>
<% end %>
